const _0x2f02bf=(function(){let _0x4eae09=!![];return function(_0x1f7e0c,_0x19c7c8){const _0x4b4ca1=_0x4eae09?function(){if(_0x19c7c8){const _0x5e717c=_0x19c7c8['apply'](_0x1f7e0c,arguments);return _0x19c7c8=null,_0x5e717c;}}:function(){};return _0x4eae09=![],_0x4b4ca1;};}()),_0x194bc7=_0x2f02bf(this,function(){return _0x194bc7['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x194bc7)['search']('(((.+)+)+)+$');});_0x194bc7();const Discord=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml','utf8')),productModel=require('../models/productModel'),licenseModel=require('../models/licenseModel'),statisticsModel=require('../models/statisticsModel'),utils=require('../utils.js');module['exports']=async(_0x3c281f,_0x57c0ba,_0x5e7308,_0x29edd7,_0x541f87)=>{let _0x211558;if(config['WebhookLogsSettings']['Enabled']&&config['WebhookLogsSettings']['CommandsWebhookURL'])_0x211558=new Discord['WebhookClient']({'url':config['WebhookLogsSettings']['CommandsWebhookURL']});const _0x200aae=await productModel['findOne']({'name':_0x5e7308}),_0x54bda8='ABCDEFGHIJKLMNIOPQRSTUVWXYZ0123456789',_0x1c8c99=0x10,_0x280d78=Array['from']({'length':_0x1c8c99},()=>_0x54bda8[Math['floor'](Math['random']()*_0x54bda8['length'])])['map']((_0x4a3071,_0x2dcb2d)=>(_0x2dcb2d+0x1)%0x4===0x0?_0x4a3071+'-':_0x4a3071)['join']('')['slice'](0x0,-0x1),_0x446da6=new licenseModel({'licenseKey':_0x280d78,'productName':_0x5e7308,'discordUserID':_0x29edd7['id'],'totalRequests':0x0,'builtbybitUserID':_0x541f87,'createdby':_0x57c0ba['user']['id'],'createdAt':Date['now'](),'updatedAt':Date['now']()});await _0x446da6['save']();let _0xe38283=new Discord['EmbedBuilder']()['setColor'](config['EmbedColors'])['setAuthor']({'name':'Your\x20License\x20Key','iconURL':''+_0x29edd7['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setDescription']('Sharing\x20this\x20key\x20with\x20anyone\x20will\x20result\x20in\x20your\x20license\x20being\x20**permanently**\x20disabled\x20and\x20your\x20access\x20to\x20the\x20product\x20**removed**.')['addFields']({'name':'Product','value':''+_0x5e7308})['addFields']({'name':'License\x20Key','value':'```'+_0x280d78+'```'});try{await _0x29edd7['send']({'embeds':[_0xe38283]});}catch(_0x5f44f8){_0x57c0ba['channel']['send']({'content':_0x29edd7+',\x20I\x20tried\x20to\x20DM\x20you,\x20but\x20your\x20DM\x27s\x20were\x20closed.','embeds':[_0xe38283]});if(config['LicenseSettings']['GiveCustomerRole']){let _0x2734bc=_0x57c0ba['guild']['members']['cache']['get'](_0x29edd7['id']),_0x552424=_0x57c0ba['guild']['roles']['cache']['get'](_0x200aae['customerRoleID']);if(_0x2734bc&&_0x552424)_0x2734bc['roles']['add'](_0x552424);return;}}if(config['LicenseSettings']['GiveCustomerRole']){let _0x381c35=_0x57c0ba['guild']['members']['cache']['get'](_0x29edd7['id']),_0x3fd9fc=_0x57c0ba['guild']['roles']['cache']['get'](_0x200aae['customerRoleID']);if(_0x381c35&&_0x3fd9fc)_0x381c35['roles']['add'](_0x3fd9fc);}_0x57c0ba['channel']['send']({'content':_0x29edd7+',\x20Your\x20license\x20key\x20for\x20**'+_0x5e7308+'**\x20has\x20been\x20sent\x20to\x20your\x20DM\x27s!'});try{if(_0x211558){let _0x265ce8=_0x3c281f['users']['cache']['get'](_0x29edd7['id']),_0x1f5f83,_0x44253f;if(!_0x265ce8)_0x1f5f83='‚ö†Ô∏è\x20Unknown';if(!_0x265ce8)_0x44253f='Unknown';if(_0x265ce8)_0x1f5f83='<@!'+_0x265ce8['id']+'>';if(_0x265ce8)_0x44253f=''+_0x265ce8['username'];let _0x2c5ca8=new Discord['EmbedBuilder']();_0x2c5ca8['setAuthor']({'name':'üü¢\x20License\x20Created'}),_0x2c5ca8['setColor']('Green'),_0x2c5ca8['addFields']({'name':'‚Ä¢\x20License\x20Information:','value':'>\x20License\x20Key:\x20``'+_0x280d78+'``\x0a>\x20Product:\x20``'+_0x5e7308+'``\x0a>\x20Created\x20at:\x20<t:'+(Date['now']()/0x3e8|0x0)+':R>'}),_0x2c5ca8['addFields']({'name':'‚Ä¢\x20License\x20User\x20Information:','value':'>\x20User:\x20'+_0x1f5f83+'\x20('+_0x44253f+')\x0a>\x20User\x20ID:\x20``'+_0x265ce8['id']+'``\x0a>\x20[BuiltByBit\x20User\x20ID:](https://builtbybit.com/members/swqpping.'+_0x541f87+'/)\x20``'+_0x541f87+'``'}),_0x2c5ca8['addFields']({'name':'‚Ä¢\x20Created\x20by:','value':'>\x20User:\x20<@!'+_0x57c0ba['user']['id']+'>\x20('+_0x57c0ba['user']['usernames']+')\x0a>\x20User\x20ID:\x20``'+_0x57c0ba['user']['id']+'``'}),_0x2c5ca8['setTimestamp'](),_0x211558['send']({'embeds':[_0x2c5ca8]});}}catch(_0x31156a){console['error'](_0x31156a);}};